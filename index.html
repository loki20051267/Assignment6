<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Laptop Builder - Brand Images Fixed</title>
  <style>
    :root{
      --accent:#00c4ff;
      --card-bg: rgba(255,255,255,0.08);
      --glass-border: rgba(255,255,255,0.12);
    }
    html,body{height:100%;margin:0;font-family:Segoe UI,Roboto,Arial,sans-serif;background:#000}
    body{
      background: url('https://images.unsplash.com/photo-1517336714731-489689fd1ca8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover fixed no-repeat;
      color:#fff;
      position:relative;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    /* dark overlay so UI pops */
    body::before{
      content:"";
      position:fixed;inset:0;
      background:linear-gradient(180deg, rgba(0,0,0,0.65), rgba(0,0,0,0.6));
      z-index:0;
    }

    header{
      position:relative;z-index:1;
      text-align:center;padding:28px 18px;border-bottom:2px solid rgba(255,255,255,0.05);
    }
    header h1{margin:0;font-size:1.9rem;color:var(--accent);letter-spacing:0.6px}
    header p{margin:6px 0 0;color:rgba(255,255,255,0.75);font-size:0.95rem}

    main{position:relative;z-index:1;display:flex;gap:28px;align-items:flex-start;justify-content:center;padding:36px;flex-wrap:wrap}

    .card{
      width:360px;
      background:var(--card-bg);
      border-radius:14px;
      padding:20px;
      box-shadow:0 12px 40px rgba(0,0,0,0.6);
      border:1px solid var(--glass-border);
      backdrop-filter: blur(8px) saturate(120%);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .card:hover{transform:translateY(-6px);box-shadow:0 18px 50px rgba(0,0,0,0.7)}

    h2{color:var(--accent);margin:0 0 12px;font-size:1.15rem;text-align:center}

    label{display:block;margin:10px 0 6px;font-weight:600;color:rgba(255,255,255,0.9);font-size:0.9rem}
    select{width:100%;padding:10px;border-radius:8px;border:none;background:rgba(0,0,0,0.35);color:#fff;font-size:0.95rem}
    button{width:100%;margin-top:12px;padding:12px;border-radius:10px;border:none;background:var(--accent);color:#000;font-weight:700;cursor:pointer}
    button:hover{filter:brightness(.94)}

    #output{white-space:pre-wrap;background:rgba(0,0,0,0.45);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);font-size:0.95rem;color:#cceeea;min-height:84px}
    #imageWrap{margin-top:12px;text-align:center}
    #laptopImage{max-width:100%;height:auto;border-radius:8px;border:1px solid rgba(255,255,255,0.06);display:none;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    #imageCaption{margin-top:8px;font-size:0.9rem;color:rgba(255,255,255,0.85)}

    /* small loader */
    .loader{display:inline-block;width:18px;height:18px;border-radius:50%;border:3px solid rgba(255,255,255,0.18);border-top-color:var(--accent);animation:spin 0.9s linear infinite;vertical-align:middle;margin-right:7px}
    @keyframes spin{to{transform:rotate(360deg)}}

    footer{position:relative;z-index:1;text-align:center;padding:20px;color:rgba(255,255,255,0.6);font-size:0.85rem}
    @media (max-width:860px){
      main{padding:18px}
      .card{width:94%}
    }
  </style>
</head>
<body>
  <header>
    <h1>Laptop Builder — Fixed Brand Images</h1>
    <p>Pick a brand, customize specs, and see a brand-specific preview (no uploads needed)</p>
  </header>

  <main>
    <!-- Builder form -->
    <section class="card" aria-labelledby="customize">
      <h2 id="customize">Customize</h2>

      <label for="brand">Brand</label>
      <select id="brand" aria-label="Brand">
        <option>Dell</option>
        <option>HP</option>
        <option>Lenovo</option>
        <option>Asus</option>
        <option>Apple</option>
        <option>Acer</option>
        <option>MSI</option>
      </select>

      <label for="ram">RAM</label>
      <select id="ram">
        <option>8GB</option>
        <option>16GB</option>
        <option>32GB</option>
        <option>64GB</option>
      </select>

      <label for="storage">Storage</label>
      <select id="storage">
        <option>256GB SSD</option>
        <option>512GB SSD</option>
        <option>1TB SSD</option>
        <option>2TB SSD</option>
      </select>

      <label for="graphics">Graphics</label>
      <select id="graphics">
        <option>Integrated</option>
        <option>NVIDIA RTX 3050</option>
        <option>NVIDIA RTX 3060</option>
        <option>NVIDIA RTX 4070</option>
        <option>Apple M2 GPU</option>
      </select>

      <label for="warranty">Warranty</label>
      <select id="warranty">
        <option>1 Year</option>
        <option>2 Years</option>
        <option>3 Years</option>
      </select>

      <button id="buildBtn">Build Laptop</button>
    </section>

    <!-- Output & Image -->
    <section class="card" aria-labelledby="result">
      <h2 id="result">Your Build</h2>
      <div id="output">No laptop built yet.</div>

      <div id="imageWrap" aria-live="polite">
        <div id="loadingText" style="display:none;margin-top:10px;color:rgba(255,255,255,0.9)"><span class="loader"></span>Loading image...</div>
        <img id="laptopImage" alt="Brand laptop preview">
        <div id="imageCaption" style="display:none"></div>
      </div>
    </section>
  </main>

  <footer>Fixed — images per-brand via Unsplash source queries. If anything still looks wrong, paste the brand you selected and I’ll debug.</footer>

  <script>
    /* ========== Builder Pattern (JS) ========== */
    class Laptop {
      constructor(){ this.brand=''; this.ram=''; this.storage=''; this.graphics=''; this.warranty=''; }
      specs(){ return `Brand: ${this.brand}\nRAM: ${this.ram}\nStorage: ${this.storage}\nGraphics: ${this.graphics}\nWarranty: ${this.warranty}`; }
    }
    class LaptopBuilder {
      constructor(){ this.laptop = new Laptop(); }
      setBrand(b){ this.laptop.brand = b; return this; }
      setRAM(r){ this.laptop.ram = r; return this; }
      setStorage(s){ this.laptop.storage = s; return this; }
      setGraphics(g){ this.laptop.graphics = g; return this; }
      setWarranty(w){ this.laptop.warranty = w; return this; }
      build(){ return this.laptop; }
    }

    /* ========== Brand image sources (dynamic queries) ========== */
    // Using source.unsplash.com with brand query -> gives a relevant unique image for each brand
    const brandImageQueries = {
      Dell:   "https://source.unsplash.com/1200x800/?dell,laptop,notebook",
      HP:     "https://source.unsplash.com/1200x800/?hp,laptop,notebook",
      Lenovo: "https://source.unsplash.com/1200x800/?lenovo,laptop,notebook",
      Asus:   "https://source.unsplash.com/1200x800/?asus,laptop,gaming",
      Apple:  "https://source.unsplash.com/1200x800/?macbook,apple,macbookpro",
      Acer:   "https://source.unsplash.com/1200x800/?acer,laptop,notebook",
      MSI:    "https://source.unsplash.com/1200x800/?msi,gaming,laptop"
    };

    // Helpers
    const $ = id => document.getElementById(id);
    const addCacheBuster = url => url + (url.includes('?') ? '&' : '?') + 'sig=' + Date.now();

    // Elements
    const buildBtn = $('buildBtn');
    const output = $('output');
    const laptopImage = $('laptopImage');
    const loadingText = $('loadingText');
    const imageCaption = $('imageCaption');

    // Build handler
    buildBtn.addEventListener('click', () => {
      const brand = $('brand').value.trim();
      const ram = $('ram').value;
      const storage = $('storage').value;
      const graphics = $('graphics').value;
      const warranty = $('warranty').value;

      // Build object via builder pattern
      const builder = new LaptopBuilder()
        .setBrand(brand)
        .setRAM(ram)
        .setStorage(storage)
        .setGraphics(graphics)
        .setWarranty(warranty);
      const laptop = builder.build();

      // Update text output
      output.textContent = laptop.specs();

      // Image logic: show loading, set src to Unsplash query with cache-buster
      const queryUrl = brandImageQueries[brand];
      if(!queryUrl){
        laptopImage.style.display = 'none';
        imageCaption.style.display = 'block';
        imageCaption.textContent = 'No preview available for this brand.';
        loadingText.style.display = 'none';
        return;
      }

      // show loader
      loadingText.style.display = 'block';
      imageCaption.style.display = 'none';
      laptopImage.style.display = 'none';
      laptopImage.removeAttribute('src');

      // create url with cache buster to avoid stale cached image
      const imgUrl = addCacheBuster(queryUrl);

      // assign handlers (onload/onerror)
      laptopImage.onload = function(){
        loadingText.style.display = 'none';
        laptopImage.style.display = 'block';
        imageCaption.style.display = 'block';
        imageCaption.textContent = `${brand} — Preview image (unsplash)`;
      };
      laptopImage.onerror = function(){
        loadingText.style.display = 'none';
        laptopImage.style.display = 'none';
        imageCaption.style.display = 'block';
        imageCaption.textContent = 'Image failed to load — try again or pick another brand.';
      };

      // kick off load
      laptopImage.src = imgUrl;
      laptopImage.alt = `${brand} laptop preview`;
    });

    // Quick UX: if user changes brand, hide old image until rebuilt
    $('brand').addEventListener('change', () => {
      laptopImage.style.display = 'none';
      imageCaption.style.display = 'none';
      loadingText.style.display = 'none';
    });
  </script>
</body>
</html>
