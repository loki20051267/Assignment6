<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Banking Application</title>
  <style>
    /* --- Reset --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: "Segoe UI", Tahoma, sans-serif;
      display: flex;
      height: 100vh;
      background: linear-gradient(135deg, #74ebd5, #ACB6E5);
      animation: gradientShift 10s infinite alternate;
    }

    @keyframes gradientShift {
      from { background-position: 0% 50%; }
      to { background-position: 100% 50%; }
    }

    /* --- Sidebar --- */
    .sidebar {
      width: 220px;
      background: #1e1e2f;
      color: #fff;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .sidebar h2 { text-align: center; margin-bottom: 20px; }
    .nav-item {
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .nav-item:hover { background: #33334d; }

    /* --- Main --- */
    .main {
      flex: 1;
      padding: 30px;
      overflow-y: auto;
    }
    .card {
      background: #fff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h1 { margin-bottom: 15px; color: #222; }
    h2, h3 { margin-bottom: 10px; color: #444; }

    /* --- Buttons --- */
    button {
      margin: 5px;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      background: #007bff;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover { background: #0056b3; transform: translateY(-2px); }

    input, select {
      padding: 8px;
      margin: 8px 0;
      border: 1px solid #ddd;
      border-radius: 6px;
      width: 200px;
    }

    #transactions, #notifications {
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid #eee;
      padding: 10px;
      background: #fafafa;
      border-radius: 8px;
    }

    .log { margin: 5px 0; padding: 5px; background: #f1f1f1; border-radius: 5px; }
    .customer { margin: 5px 0; padding: 6px; background: #e6f2ff; border-radius: 6px; }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>üè¶ MyBank</h2>
    <div class="nav-item">Dashboard</div>
    <div class="nav-item">Transactions</div>
    <div class="nav-item">Interest</div>
    <div class="nav-item">Notifications</div>
  </div>

  <!-- Main content -->
  <div class="main">
    <div class="card">
      <h1>Account Balance: ‚Çπ<span id="balance">0</span></h1>
      <input type="number" id="amount" placeholder="Enter amount">
      <br>
      <button onclick="executeCommand('deposit')">Deposit</button>
      <button onclick="executeCommand('withdraw')">Withdraw</button>
      <button onclick="executeCommand('transfer')">Transfer</button>
      <button onclick="undo()">Undo Last</button>
    </div>

    <div class="card">
      <h3>Interest Calculation</h3>
      <select id="interestType">
        <option value="savings">Savings</option>
        <option value="current">Current</option>
        <option value="fd">Fixed Deposit</option>
      </select>
      <button onclick="calculateInterest()">Calculate</button>
      <p id="interestResult"></p>
    </div>

    <div class="card">
      <h3>Notifications (Observers)</h3>
      <div id="notifications"></div>
    </div>

    <div class="card">
      <h3>Transaction History</h3>
      <div id="transactions"></div>
    </div>
  </div>

<script>
  // ---- Encapsulation: Account class ----
  class Account {
    constructor(balance = 0) {
      this._balance = balance;
      this.observers = [];
    }
    get balance() { return this._balance; }
    set balance(val) { this._balance = val; this.notifyObservers(); }
    deposit(amount) { this.balance += amount; }
    withdraw(amount) { if(amount <= this.balance) this.balance -= amount; }
    attach(observer) { this.observers.push(observer); }
    notifyObservers() { this.observers.forEach(obs => obs.update(this.balance)); }
    calculateInterest() { return 0; } // polymorphic
  }

  // ---- Inheritance ----
  class SavingsAccount extends Account {
    calculateInterest() { return this.balance * 0.04; }
  }
  class CurrentAccount extends Account {
    calculateInterest() { return this.balance * 0.01; }
  }
  class FDAccount extends Account {
    calculateInterest() { return this.balance * 0.07; }
  }

  // ---- Observer Pattern ----
  class Customer {
    constructor(name) {
      this.name = name;
    }
    update(balance) {
      const note = `<div class="customer">${this.name} notified: Balance is now ‚Çπ${balance}</div>`;
      document.getElementById("notifications").innerHTML += note;
    }
  }

  // ---- Strategy Pattern ----
  const interestStrategies = {
    savings: (acc) => acc.balance * 0.04,
    current: (acc) => acc.balance * 0.01,
    fd: (acc) => acc.balance * 0.07
  };

  // ---- Command Pattern ----
  class Command {
    constructor(account, amount) {
      this.account = account;
      this.amount = amount;
    }
    execute() {}
    undo() {}
  }

  class DepositCommand extends Command {
    execute() { this.account.deposit(this.amount); }
    undo() { this.account.withdraw(this.amount); }
  }

  class WithdrawCommand extends Command {
    execute() { this.account.withdraw(this.amount); }
    undo() { this.account.deposit(this.amount); }
  }

  class TransferCommand extends Command {
    constructor(account, amount, target) { super(account, amount); this.target = target; }
    execute() { this.account.withdraw(this.amount); this.target.deposit(this.amount); }
    undo() { this.account.deposit(this.amount); this.target.withdraw(this.amount); }
  }

  // ---- Application Logic ----
  const account = new SavingsAccount(1000);
  const targetAccount = new CurrentAccount(500); // for transfer demo

  // Multiple customers (observers)
  const customer1 = new Customer("Alice");
  const customer2 = new Customer("Bob");
  const customer3 = new Customer("Charlie");

  account.attach(customer1);
  account.attach(customer2);
  account.attach(customer3);

  let history = [];

  function updateUI() {
    document.getElementById("balance").innerText = account.balance;
  }

  function executeCommand(type) {
    const amount = parseInt(document.getElementById("amount").value);
    if(isNaN(amount) || amount <= 0) return;
    let cmd;
    if(type === 'deposit') cmd = new DepositCommand(account, amount);
    if(type === 'withdraw') cmd = new WithdrawCommand(account, amount);
    if(type === 'transfer') cmd = new TransferCommand(account, amount, targetAccount);
    cmd.execute();
    history.push(cmd);
    updateUI();
    document.getElementById("transactions").innerHTML += `<div class="log">${type} ‚Çπ${amount}</div>`;
  }

  function undo() {
    const last = history.pop();
    if(last) {
      last.undo();
      updateUI();
      document.getElementById("transactions").innerHTML += `<div class="log">Undo last action</div>`;
    }
  }

  function calculateInterest() {
    const type = document.getElementById("interestType").value;
    const interest = interestStrategies[type](account);
    document.getElementById("interestResult").innerText = `Interest: ‚Çπ${interest.toFixed(2)}`;
  }

  updateUI();
</script>
</body>
</html>
